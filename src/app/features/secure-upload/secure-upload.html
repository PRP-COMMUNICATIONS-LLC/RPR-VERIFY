<!-- Scanline overlay is now handled at layout level (main-layout.component) -->
<div class="min-h-screen p-8 text-white relative overflow-hidden">
  <div class="max-w-5xl mx-auto relative z-20">
    <div class="mb-12 border-l-4 border-cyan-500 pl-6">
      <h1 class="text-4xl font-bold tracking-tighter uppercase mb-2">Forensic Ingestion Node</h1>
      <p class="text-cyan-500/60 font-mono text-sm">SECURE_CHANNEL_ACTIVE // ENCRYPTION_LEVEL: AES-256</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      
      <div class="lg:col-span-1 space-y-6">
        <div class="glass-panel p-6 rounded-lg">
          <h2 class="text-xs font-bold text-cyan-500 uppercase tracking-widest mb-6">Case Metadata</h2>
          
          <div class="space-y-4">
            <div>
              <label class="block text-[10px] uppercase text-gray-500 mb-1">Case ID</label>
              <input type="text" 
                     [ngModel]="metadata().caseId"
                     aria-label="Case ID"
                     class="w-full bg-black/50 border border-white/10 rounded p-2 text-sm font-mono focus:border-cyan-500 outline-none transition-colors"
                     readonly>
            </div>
            <div>
              <label class="block text-[10px] uppercase text-gray-500 mb-1">Analyst ID</label>
              <input type="text" 
                     [ngModel]="metadata().analystId"
                     aria-label="Analyst ID"
                     class="w-full bg-black/50 border border-white/10 rounded p-2 text-sm font-mono focus:border-cyan-500 outline-none transition-colors"
                     readonly>
            </div>
            <div>
              <label class="block text-[10px] uppercase text-gray-500 mb-1">Document Type</label>
              <select [ngModel]="metadata().documentType"
                      (ngModelChange)="updateMeta('documentType', $event)"
                      aria-label="Document Type"
                      class="w-full bg-black/50 border border-white/10 rounded p-2 text-sm font-mono focus:border-cyan-500 outline-none transition-colors">
                <option value="BANK_SLIP">BANK_SLIP</option>
                <option value="ID_CARD">ID_CARD</option>
                <option value="CONTRACT">CONTRACT</option>
                <option value="OTHER">OTHER</option>
              </select>
            </div>
            <div>
              <label class="block text-[10px] uppercase text-gray-500 mb-1">Priority</label>
              <select [ngModel]="metadata().priority"
                      (ngModelChange)="updateMeta('priority', $event)"
                      aria-label="Priority Level"
                      class="w-full bg-black/50 border border-white/10 rounded p-2 text-sm font-mono focus:border-cyan-500 outline-none transition-colors">
                <option value="LOW">LOW</option>
                <option value="MEDIUM">MEDIUM</option>
                <option value="HIGH">HIGH</option>
                <option value="CRITICAL">CRITICAL</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <div class="lg:col-span-2">
        <div class="glass-panel h-full min-h-[400px] rounded-lg border-2 border-dashed border-white/10 flex flex-col items-center justify-center p-12 transition-all duration-300"
             [class.border-cyan-500]="uploadStatus() === 'UPLOADING'"
             [class.bg-cyan-500/5]="uploadStatus() === 'UPLOADING'"
             (drop)="onDrop($event)"
             (dragover)="onDragOver($event)">
          
          @if (uploadStatus() === 'IDLE') {
            <div class="text-center">
              <div class="mb-6 inline-block p-6 rounded-full bg-white/5 border border-white/10">
                <svg class="w-12 h-12 text-cyan-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                </svg>
              </div>
              <h3 class="text-xl font-bold mb-2">Drop Forensic Evidence</h3>
              <p class="text-gray-500 text-sm mb-8">Drag and drop files here, or click to browse</p>
              
              <input type="file" #fileInput (change)="onFileSelected($event)" class="hidden" aria-label="File Upload">
              <button (click)="fileInput.click()" 
                      class="px-8 py-3 bg-white/5 border border-white/10 hover:border-cyan-500 hover:bg-cyan-500/10 transition-all uppercase text-xs tracking-widest font-bold">
                Select File
              </button>

              @if (selectedFile()) {
                <div class="mt-8 p-4 bg-black/50 border border-cyan-500/30 rounded flex items-center gap-4">
                  <div class="text-left">
                    <p class="text-xs font-mono text-cyan-500">{{ selectedFile()?.name }}</p>
                    <p class="text-[10px] text-gray-500 uppercase">{{ fileSize() }}</p>
                  </div>
                  <button (click)="startSecureUpload()" 
                          class="ml-auto px-4 py-2 bg-cyan-500 text-black text-[10px] font-bold uppercase tracking-tighter hover:bg-cyan-400 transition-colors">
                    Initialize Ingestion
                  </button>
                </div>
              }
            </div>
          }

          @if (uploadStatus() === 'UPLOADING') {
            <div class="w-full max-w-md text-center">
              <div class="mb-8 relative">
                <div class="text-6xl font-bold font-mono text-cyan-500 mb-2">{{ uploadProgress() }}%</div>
                <div class="text-[10px] uppercase tracking-[0.3em] text-cyan-500/50">Ingesting Data Stream</div>
              </div>
              <div class="w-full h-1 bg-white/10 rounded-full overflow-hidden">
                <div class="h-full bg-cyan-500 transition-all duration-300" [style.width.%]="uploadProgress()"></div>
              </div>
              <div class="mt-4 font-mono text-[10px] text-gray-500 animate-pulse">
                ENCRYPTING_PACKETS... VERIFYING_CHECKSUMS...
              </div>
            </div>
          }

          @if (uploadStatus() === 'SUCCESS') {
            <div class="text-center">
              <div class="mb-6 inline-block p-6 rounded-full bg-cyan-500/10 border border-cyan-500">
                <svg class="w-12 h-12 text-cyan-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
              </div>
              <h3 class="text-xl font-bold mb-2 text-cyan-500">Ingestion Complete</h3>
              <p class="text-gray-500 text-sm mb-8">Evidence has been securely routed to the Vision Engine.</p>
              <button (click)="reset()" 
                      class="px-8 py-3 bg-white/5 border border-white/10 hover:border-cyan-500 transition-all uppercase text-xs tracking-widest font-bold">
                New Ingestion
              </button>
            </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>
