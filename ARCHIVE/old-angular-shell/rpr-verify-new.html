<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPR-VERIFY Sovereign Interface</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=League+Spartan:wght@400;700;900&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --audit-cyan: #00BCD4;
            --alert-red: #FF0000;
            --matte-bg: #050505;
            --depth-bg: #000000;
            --status-green: #22c55e;
            --status-amber: #f59e0b;
        }

        body {
            background-color: var(--matte-bg);
            color: #fff !important;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            letter-spacing: -0.01em;
            font-size: 16px;
        }

        /* Enforce white text globally for primary data authority */
        * {
            color: #fff !important;
        }

        .text-cyan-node {
            color: var(--audit-cyan) !important;
        }

        .text-red-node {
            color: var(--alert-red) !important;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        .sovereign-heading {
            font-weight: 900;
            letter-spacing: -0.06em;
            text-transform: uppercase;
        }

        .family-spartan {
            font-family: 'League Spartan', sans-serif;
        }

        /* WELL/CARD SYSTEM */
        .glass {
            background: var(--depth-bg);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 2px;
        }

        .shadow-glow-white {
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.6), inset 0 0 1px rgba(255, 255, 255, 0.1);
        }

        .shadow-glow-cyan {
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.05), inset 0 0 1px rgba(255, 255, 255, 0.1);
        }

        .shadow-glow-red {
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.2), inset 0 0 1px rgba(255, 0, 0, 0.3);
        }

        /* STATUS TEXT GLOWS */
        .glow-white {
            text-shadow: 0 0 12px rgba(255, 255, 255, 0.6);
        }

        .sentinel-glow {
            text-shadow: 0 0 12px rgba(34, 197, 94, 0.9);
        }

        /* NAVIGATION */
        .nav-tab {
            color: #718096 !important;
            font-size: 11px;
            font-weight: 900;
            padding: 14px 22px;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            position: relative;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .nav-tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: #fff;
            transition: width 0.4s ease;
        }

        .nav-tab.active {
            color: #FFFFFF !important;
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-tab.active::after {
            width: 100%;
            background: #fff;
        }

        .nav-tab.res-mode.active::after {
            background: var(--alert-red);
        }

        /* TABLE SYSTEM */
        .dash-table th {
            padding: 1.25rem 1.5rem;
            color: rgba(255, 255, 255, 0.4) !important;
            font-size: 10px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-align: left;
        }

        .dash-table td {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            vertical-align: middle;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            color: #fff;
        }

        /* AUTH BUTTON */
        .google-btn {
            background: #131314;
            border: 1px solid #444746;
            color: #e3e3e3;
            border-radius: 4px;
            padding: 10px 20px;
            font-size: 12px;
            font-weight: 700;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .google-btn:hover {
            background: #202124;
            border-color: #8e918f;
        }

        /* INTELLIGENCE LAB */
        .step-btn {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.05);
            background: rgba(255, 255, 255, 0.02);
            cursor: pointer;
        }

        .step-btn.active {
            border-color: rgba(255, 0, 0, 0.4);
            background: rgba(255, 0, 0, 0.08);
            box-shadow: inset 0 0 25px rgba(255, 0, 0, 0.1);
        }

        .scanline {
            width: 100%;
            height: 1px;
            background: rgba(255, 255, 255, 0.03);
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 1000;
            animation: scan 10s linear infinite;
        }

        @keyframes scan {
            0% {
                top: -2%;
            }

            100% {
                top: 100%;
            }
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body class="antialiased">
    <div class="scanline" id="globalScanline"></div>

    <!-- HEADER -->
    <header id="mainHeader" class="border-b border-white/10 bg-black/90 backdrop-blur-3xl sticky top-0 z-[60]">
        <div class="max-w-[1600px] mx-auto px-10 py-6 flex justify-between items-center">

            <div class="flex items-center gap-6">
                <svg id="logoIcon" class="w-10 h-10 shrink-0 transition-all duration-1000 fill-white"
                    viewBox="0 0 512 512">
                    <path
                        d="M366.26,256L256,56L145.74,256L35.48,456H256h220.52L366.26,256z M462.43,448.02H327.14 c-52.29-17.46-99.26-47.08-123.05-72.78c12.09,3.24,29.59,6.3,53.32,6.78c43.69,0.87,71.69-14.09,71.69-14.09s-0.04-0.49-0.13-1.36 l0.44,1.33c10.53-38.31,14.66-76.67,9.8-143.39l20.22,36.67L462.43,448.02z M255.21,246.4c0,0,17.34,12.57,41.66,53.19 c15.5,25.89,23.07,61.65,23.07,61.65s-27.12,11.27-63.76,11.1c-37.52-0.53-63.59-9.51-63.59-9.51s5.81-34.7,21.66-61.82 C230.29,270.35,255.21,246.4,255.21,246.4z M153.41,261.17L256.42,74.33l70.68,128.2c8.42,51.22,5.65,107.88-2.38,140.27 c-3.5-14.36-9.64-32.72-20.28-49.2c-28.27-43.79-47.74-58.99-47.74-58.99s-0.36,0.2-1.01,0.63 c-42.74,11.66-77.73,28.09-123.62,64.64L153.41,261.17z M50.4,448.02l69.84-126.68c39.4-37.4,94.72-65.51,118.02-70.6 c-9.71,10.52-22.24,27.08-35.09,52.2c-18.12,35.42-20.61,64.11-20.61,64.11s0.59,0.37,1.78,0.99l-1.55-0.36 c29.53,30.52,56.36,49.88,116.46,80.35h-42.83H50.4z" />
                </svg>
                <div class="logo-text sovereign-heading text-2xl tracking-tighter whitespace-nowrap">
                    <span class="text-white">RPR</span>
                    <span id="logoSubtext" class="text-white">VERIFY</span>
                </div>
            </div>

            <nav class="hidden lg:flex items-center gap-1 border-x border-white/10 px-8">
                <div onclick="setTab('upload')" class="nav-tab active" data-tab="upload">INFORMATION</div>
                <div onclick="setTab('total')" class="nav-tab" data-tab="total">TRANSACTIONS</div>
                <div onclick="setTab('assets')" class="nav-tab" data-tab="assets">VERIFICATION</div>
                <div onclick="setTab('resolution')" class="nav-tab res-mode" data-tab="resolution">RESOLUTION</div>
            </nav>

            <div class="flex items-center gap-4">
                <button class="google-btn">
                    <svg width="18" height="18" viewBox="0 0 18 18">
                        <path
                            d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"
                            fill="#4285F4" />
                        <path
                            d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 009 18z"
                            fill="#34A853" />
                        <path
                            d="M3.964 10.712c-.18-.54-.282-1.117-.282-1.712s.102-1.172.282-1.712V4.956H.957a8.994 8.994 0 000 8.088l3.007-2.332z"
                            fill="#FBBC05" />
                        <path
                            d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.443 2.017.957 4.956L3.964 7.29c.708-2.127 2.692-3.71 5.036-3.71z"
                            fill="#EA4335" />
                    </svg>
                    <span class="font-bold">Log In</span>
                </button>
            </div>
        </div>
    </header>

    <div class="company-banner bg-white/[0.03] border-b border-white/5 py-4 px-10 text-right">
        <p class="text-[11px] text-white uppercase tracking-[0.45em] font-black">RPR COMMUNICATIONS, LLC</p>
    </div>

    <main id="tabContent" class="max-w-[1600px] mx-auto px-6 lg:px-10 py-12 lg:py-20"></main>

    <footer
        class="border-t border-white/10 bg-black/95 backdrop-blur-2xl sticky bottom-0 py-6 flex justify-between items-center px-10 z-[60]">
        <span class="text-[10px] font-black text-white uppercase tracking-[0.25em]">© 2025 RPR COMMUNICATIONS,
            LLC</span>
        <div class="flex items-center gap-12">
            <div
                class="flex items-center gap-4 opacity-50 hover:opacity-100 transition-all duration-500 cursor-default">
                <div class="text-right">
                    <p class="text-[8px] font-black text-white/40 uppercase tracking-widest leading-none">Powered by</p>
                    <p class="text-[12px] font-black text-white uppercase tracking-tighter">GEMINI 2.5</p>
                </div>
                <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none">
                    <path d="M12 2L14.8 9.2L22 12L14.8 14.8L12 22L9.2 14.8L2L12 12L9.2 9.2L12 2Z"
                        fill="url(#gemini_grad)" />
                    <defs>
                        <linearGradient id="gemini_grad" x1="2" y1="2" x2="22" y2="22" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#4E82EE" />
                            <stop offset="1" stop-color="#B265E6" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            <div class="flex items-center gap-3">
                <div id="sentinelIndicator"
                    class="w-2 h-2 rounded-full animate-pulse bg-green-500 shadow-[0_0_12px_rgba(34,197,94,0.8)]"></div>
                <span id="sentinelText"
                    class="text-[10px] font-black uppercase tracking-[0.25em] sentinel-glow glow-green">Sentinel
                    Protocol</span>
            </div>
        </div>
    </footer>

    <script>
        const RPR_PATH = "M366.26,256L256,56L145.74,256L35.48,456H256h220.52L366.26,256z M462.43,448.02H327.14 c-52.29-17.46-99.26-47.08-123.05-72.78c12.09,3.24,29.59,6.3,53.32,6.78c43.69,0.87,71.69-14.09,71.69-14.09s-0.04-0.49-0.13-1.36 l0.44,1.33c10.53-38.31,14.66-76.67,9.8-143.39l20.22,36.67L462.43,448.02z M255.21,246.4c0,0,17.34,12.57,41.66,53.19 c15.5,25.89,23.07,61.65,23.07,61.65s-27.12,11.27-63.76,11.1c-37.52-0.53-63.59-9.51-63.59-9.51s5.81-34.7,21.66-61.82 C230.29,270.35,255.21,246.4,255.21,246.4z M153.41,261.17L256.42,74.33l70.68,128.2c8.42,51.22,5.65,107.88-2.38,140.27 c-3.5-14.36-9.64-32.72-20.28-49.2c-28.27-43.79-47.74-58.99-47.74-58.99s-0.36,0.2-1.01,0.63 c-42.74,11.66-77.73,28.09-123.62,64.64L153.41,261.17z M50.4,448.02l69.84-126.68c39.4-37.4,94.72-65.51,118.02-70.6 c-9.71,10.52-22.24,27.08-35.09,52.2c-18.12,35.42-20.61,64.11-20.61,64.11s0.59,0.37,1.78,0.99l-1.55-0.36 c29.53,30.52,56.36,49.88,116.46,80.35h-42.83H50.4z";

        const MASTER_LEDGER = [
            { id: '1', userId: 'SMITH/2025/52', bank: 'CBA AU', type: 'OSKO', date: '2025-12-17', clearanceDate: '2025-12-18', rec: 'RPR_ESCROW', amt: 15450.00 },
            { id: '2', userId: 'USR/2025/53', bank: 'Westpac Business', type: 'NPP-FAST', date: '2025-12-18', clearanceDate: '2025-12-18', rec: 'RPR_ESCROW', amt: 1250.50 },
            { id: '3', userId: 'USR/2025/54', bank: 'NAB Node', type: 'OSKO', date: '2025-12-15', clearanceDate: '2025-12-16', rec: 'RPR_ESCROW', amt: 3200.75 },
            { id: '4', userId: 'USR/2025/55', bank: 'Macquarie', type: 'OSKO', date: '2025-12-14', clearanceDate: '2025-12-15', amt: 900.20 },
            { id: '5', userId: 'USR/2025/56', bank: 'ANZ Digital', type: 'NPP-FAST', date: '2025-12-13', clearanceDate: '2025-12-13', amt: 450.00 },
            { id: '6', userId: 'USR/2025/57', bank: 'Westpac Business', type: 'OSKO', date: '2025-12-12', clearanceDate: '2025-12-14', amt: 11200.00 },
            { id: '7', userId: 'USR/2025/58', bank: 'CBA AU', type: 'OSKO', date: '2025-12-11', clearanceDate: '2025-12-12', amt: 430.50 },
            { id: '8', userId: 'USR/2025/59', bank: 'NAB Node', type: 'NPP-FAST', date: '2025-12-10', clearanceDate: '2025-12-10', amt: 5200.00 },
            { id: '9', userId: 'USR/2025/60', bank: 'Macquarie', type: 'OSKO', date: '2025-12-09', clearanceDate: '2025-12-10', amt: 1250.00 },
            { id: '10', userId: 'USR/2025/61', bank: 'ANZ Digital', type: 'OSKO', date: '2025-12-08', clearanceDate: '2025-12-09', amt: 13660.25 }
        ];

        const dummyProfiles = {
            'SMITH': {
                mode: 'BUSINESS',
                fullName: 'JONATHAN QUINTON SMITH',
                idNumber: 'SMITH/2025/52',
                address: 'UNIT 4, 128 CROWN STREET, SURRY HILLS NSW 2010',
                entityName: 'SMITH FORENSIC HOLDINGS PTY LTD',
                abn: '11 102 394 857',
                bankName: 'COMMONWEALTH BANK OF AUSTRALIA',
                accountNumber: '1012 3456',
                bsb: '062-000',
                transactions: [
                    { date: '2025-12-20', balance: 15450.00 },
                    { date: '2025-12-18', balance: 12200.50 },
                    { date: '2025-12-15', balance: 11000.00 }
                ]
            }
        };

        const resolutionPhases = [
            { label: "PHASE 1: FORENSIC EVIDENCE", protocol: "// EVID_INGEST_01", description: "Deep audit of institutional failure and verification gaps established during ingestion.", actions: ["Collect Metadata", "Audit Timestamps", "Ingest Bank Logs"] },
            { label: "PHASE 2: SYSTEMIC AUDIT", protocol: "// VULN_MAP_PROX", description: "Cross-referencing institutional guessing against regulatory standards.", actions: ["Map Violations", "Trace Hierarchy", "Identify Loops"] },
            { label: "PHASE 3: FORMAL ESCALATION", protocol: "// RESOLUTION_EXEC_V4", description: "Final execution of mandates to force funds clearance and settlement.", actions: ["Issue Breach Notice", "Route Level 3", "Secure Settlement"] }
        ];

        const scenarios = {
            'ESCROW_DISPUTE': { quickAnswer: "Institutional lag detected. System in liability-reduction mode. Required: Phase 2 Audit.", documents: ["Forensic Evidence Pack", "Escrow Status Notice"] },
            'FRAUD_ALERT': { quickAnswer: "False positive deviation. Institution guessing risk markers. Required: Identity Protocol.", documents: ["ID Rebuttal", "Fraud Flag Clearance"] },
            'ACCOUNT_FREEZE': { quickAnswer: "Internal system error. Loop failure detected. Required: Immediate Escalation.", documents: ["Account Release Mandate", "Forensic Data Log"] }
        };

        const state = {
            activeTab: 'upload',
            selectedUserId: 'SMITH/2025/52',
            isEscalated: false,
            currentWeek: '52',
            resolutionPhase: 0,
            selectedScenario: 'ESCROW_DISPUTE',
            ledgerData: [...MASTER_LEDGER],
            documents: [
                { id: 'poi', label: 'Proof of ID', accepted: true },
                { id: 'poa', label: 'Proof of Address', accepted: true },
                { id: 'pob', label: 'Proof of Bank Ownership', accepted: true },
                { id: 'abn', label: 'ABN Certificate', accepted: false },
                { id: 'misc', label: 'Miscellaneous', accepted: false }
            ],
            selectedUser: dummyProfiles['SMITH'],
            searchUserId: 'SMITH',
            previewPage: 1
        };

        function render() {
            const container = document.getElementById('tabContent');
            const logoIcon = document.getElementById('logoIcon');
            const sentinelIndicator = document.getElementById('sentinelIndicator');
            const sentinelText = document.getElementById('sentinelText');

            document.querySelectorAll('.nav-tab').forEach(el => el.classList.toggle('active', el.dataset.tab === state.activeTab));
            logoIcon.style.fill = state.isEscalated ? '#FF0000' : '#FFFFFF';

            if (state.isEscalated) {
                sentinelIndicator.className = "w-2 h-2 rounded-full animate-pulse bg-red-500 shadow-[0_0_15px_rgba(255,0,0,0.9)]";
                sentinelText.className = "text-[10px] font-black uppercase tracking-[0.25em] glow-white";
            } else {
                sentinelIndicator.className = "w-2 h-2 rounded-full animate-pulse bg-green-500 shadow-[0_0_12px_rgba(34,197,94,0.8)]";
                sentinelText.className = "text-[10px] font-black uppercase tracking-[0.25em] sentinel-glow";
            }

            if (state.activeTab === 'upload') container.innerHTML = renderInformation();
            if (state.activeTab === 'total') container.innerHTML = renderTransactions();
            if (state.activeTab === 'assets') container.innerHTML = renderVerification();
            if (state.activeTab === 'resolution') container.innerHTML = renderResolution();

            if (window.lucide) window.lucide.createIcons();
        }

        // --- TAB 1: INFORMATION ---
        function renderInformation() {
            const user = state.selectedUser;
            return `
            <div class="space-y-12 animate-in fade-in duration-500">
                <header class="flex gap-8 items-end w-full">
                    <h2 class="sovereign-heading tracking-tighter leading-none">
                        <span class="text-xl lg:text-2xl opacity-50 block font-bold mb-1">CUSTOMER</span>
                        <span class="text-6xl lg:text-7xl">INFORMATION</span>
                    </h2>
                </header>
                <div class="flex flex-col lg:flex-row gap-10 items-stretch">
                    <div class="lg:w-2/3 flex flex-col gap-10">
                        <div class="flex flex-col">
                            <h3 class="text-[11px] font-black text-white uppercase tracking-widest mb-4 opacity-40">Documentation Ingestion</h3>
                            <div class="glass border-2 border-dashed border-white/10 p-24 flex flex-col items-center justify-center group shadow-glow-white hover:border-white/40 transition-all cursor-pointer">
                                <i data-lucide="upload-cloud" class="w-16 h-16 text-white/40 mb-6 group-hover:text-white transition-colors"></i>
                                <p class="text-[15px] font-black uppercase tracking-widest mb-2">Secure Drop Zone</p>
                                <p class="text-[11px] text-white/30 uppercase text-center tracking-wider font-bold">Payload entry node active</p>
                            </div>
                        </div>
                        <div class="flex flex-col">
                            <h3 class="text-[11px] font-black text-white uppercase tracking-widest mb-4 opacity-40">Subject Audit Details</h3>
                            <div class="glass p-10 shadow-glow-white space-y-8">
                                <div class="grid grid-cols-2 gap-12">
                                    <div><p class="text-[10px] opacity-30 uppercase tracking-widest mb-1">Legal Name</p><p class="text-[18px] font-bold uppercase">${user.fullName}</p></div>
                                    <div><p class="text-[10px] opacity-30 uppercase tracking-widest mb-1">ID Number</p><p class="text-[18px] font-mono font-bold">${user.idNumber}</p></div>
                                </div>
                                <div class="h-px bg-white/10"></div>
                                <div class="grid grid-cols-2 gap-12">
                                    <div><p class="text-[10px] opacity-30 uppercase tracking-widest mb-1">Address</p><p class="text-[14px] uppercase font-bold leading-relaxed">${user.address}</p></div>
                                    <div><p class="text-[10px] opacity-30 uppercase tracking-widest mb-1">Entity Reference</p><p class="text-[14px] uppercase font-bold leading-relaxed">${user.entityName}</p></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="lg:w-1/3 flex flex-col">
                        <h3 class="text-[11px] font-black text-white uppercase tracking-widest mb-4 opacity-40">Required Components</h3>
                        <div class="glass p-8 flex-grow shadow-glow-white space-y-4">
                            ${state.documents.map(doc => `
                                <div class="flex items-center p-6 transition-all duration-500 border-l-4 ${doc.accepted ? 'border-white bg-white/5 shadow-glow-white' : 'border-white/10 bg-white/[0.02]'}">
                                    <span class="text-[14px] font-black uppercase tracking-widest ${doc.accepted ? 'text-white glow-white' : 'text-white/40'}">${doc.label}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
                <div class="space-y-6 pt-12">
                    <div class="flex flex-col"><span class="text-[12px] font-black uppercase tracking-[0.45em] mb-2 opacity-40">total (small)</span><h3 class="text-3xl lg:text-4xl font-black uppercase tracking-tight text-white">transactions</h3></div>
                    <div class="glass overflow-x-auto shadow-glow-white">
                        <table class="dash-table w-full text-left">
                            <thead><tr class="bg-white/5"><th>CUSTOMER ID</th><th>BANK NAME</th><th>TRANSFER DATE</th><th>CLEARANCE DATE</th><th>RECEIVER</th><th class="text-center">ESC</th></tr></thead>
                            <tbody>${state.ledgerData.slice(0, 3).map(row => `<tr class="hover:bg-white/[0.03] transition-colors uppercase"><td class="font-mono">${row.userId}</td><td>${row.bank}</td><td class="opacity-50 font-mono">${row.date}</td><td class="font-black">${row.clearanceDate}</td><td class="text-white/60">${row.rec}</td><td class="text-center"><div class="w-3 h-3 rounded-full bg-white/10 border border-white/20 mx-auto"></div></td></tr>`).join('')}</tbody>
                        </table>
                    </div>
                </div>
            </div>`;
        }

        // --- TAB 2: TRANSACTIONS ---
        function renderTransactions() {
            return `
            <div class="space-y-12 animate-in fade-in duration-500">
                <header class="flex flex-col lg:flex-row gap-8 lg:items-end justify-between w-full">
                    <div class="flex flex-col text-white">
                        <h2 class="sovereign-heading text-6xl lg:text-7xl tracking-tighter leading-none uppercase">transactions</h2>
                    </div>
                    <div class="flex items-center gap-4">
                        <span class="text-[10px] font-black text-white/30 uppercase tracking-widest whitespace-nowrap">Week Recall</span>
                        <select onchange="handleRecallAction(this.value)" class="bg-white/5 border border-white/10 text-white text-[11px] font-black uppercase px-6 py-3 focus:outline-none hover:border-white/40 cursor-pointer">
                            <option value="52" ${state.currentWeek === '52' ? 'selected' : ''}>WK 52 (Current)</option>
                            <option value="51" ${state.currentWeek === '51' ? 'selected' : ''}>WK 51 (Previous)</option>
                            <option value="clear">CLEAR LEDGER LIST</option>
                        </select>
                    </div>
                </header>

                <section class="glass p-10 border-l-4 border-white shadow-glow-white flex flex-col md:flex-row justify-between items-center gap-8">
                    <div>
                        <p class="text-5xl lg:text-6xl font-black tracking-tighter text-white font-mono uppercase">AUD 52,992</p>
                    </div>
                </section>

                <div class="glass overflow-x-auto shadow-glow-white">
                    <div class="flex flex-col p-6 border-b border-white/5 bg-white/[0.01]">
                         <h3 class="text-2xl font-black uppercase tracking-tight text-white">STATEMENT TOTAL-WK${state.currentWeek}</h3>
                    </div>
                    <table class="dash-table w-full text-left">
                        <thead><tr class="bg-white/5"><th>USER ID</th><th>TYPE</th><th>BANK NAME</th><th>CLEARANCE DATE</th><th class="text-right">AMOUNT</th></tr></thead>
                        <tbody>${state.ledgerData.map(row => `<tr class="hover:bg-white/[0.03] transition-colors font-bold uppercase"><td class="font-mono text-[12px]">${row.userId}</td><td class="text-white/40">${row.type}</td><td>${row.bank}</td><td class="font-black">${row.clearanceDate}</td><td class="text-right font-black">$${row.amt.toLocaleString('en-AU', { minimumFractionDigits: 2 })}</td></tr>`).join('')}${state.ledgerData.length === 0 ? '<tr><td colspan="5" class="p-24 text-center opacity-20 font-black tracking-[1em]">SYSTEM_STANDBY</td></tr>' : ''}</tbody>
                    </table>
                </div>
            </div>`;
        }

        // --- TAB 3: VERIFICATION ---
        function renderVerification() {
            const user = state.selectedUser;
            return `
            <div class="space-y-12 animate-in fade-in duration-500">
                <header class="flex gap-8 items-center w-full border-b border-white/5 pb-10">
                    <div class="w-[70%] flex items-center gap-6">
                        <svg class="w-20 h-20 fill-white" viewBox="0 0 512 512"><path d="${RPR_PATH}"/></svg>
                        <div class="flex flex-col">
                            <h2 class="sovereign-heading tracking-tighter leading-none">
                                <span class="text-xl lg:text-2xl opacity-50 block font-bold mb-1 uppercase">PROACTIVE AUDIT</span>
                                <span class="text-6xl lg:text-7xl">VERIFICATION</span>
                            </h2>
                        </div>
                    </div>
                </header>
                <div class="flex flex-col lg:flex-row gap-8 w-full items-stretch">
                    <div class="lg:w-[70%]">
                        <section class="glass border-l-4 border-white shadow-glow-white h-full p-10">
                            <h3 class="text-[10px] font-black uppercase tracking-[0.3em] mb-8 border-b border-white/10 pb-4">Customer Information Sheet (CIS)</h3>
                            <div class="grid grid-cols-2 gap-12">
                                <div><h4 class="text-[9px] font-black text-white/30 uppercase mb-4 tracking-widest border-b border-white/5 pb-2">1. Identity</h4><table class="w-full"><tr><td class="py-2 opacity-40 text-[10px]">Legal Name</td><td class="py-2 text-right font-black">${user.fullName}</td></tr><tr><td class="py-2 opacity-40 text-[10px]">ID Ref</td><td class="py-2 text-right font-black">${user.idNumber}</td></tr></table></div>
                                <div><h4 class="text-[9px] font-black text-white/30 uppercase mb-4 tracking-widest border-b border-white/5 pb-2">2. Address</h4><p class="text-sm font-black leading-relaxed uppercase">${user.address}</p></div>
                            </div>
                        </section>
                    </div>
                    <div class="lg:w-[30%] flex flex-col gap-4">
                        <div class="glass p-2 flex items-center gap-2"><input id="lookupInput" type="text" value="${state.searchUserId}" class="bg-transparent border-none text-[11px] font-black uppercase px-4 py-2 focus:outline-none flex-grow"><button onclick="lookup()" class="px-6 py-2 bg-white text-black text-[10px] font-black uppercase">CALL</button></div>
                        <div class="glass p-8 shadow-glow-white flex-grow"><h3 class="text-[10px] font-black opacity-40 uppercase mb-6 tracking-widest">Output Manifest</h3><button class="w-full py-4 bg-white text-black font-black text-[11px] mb-4">GENERATE CIS REPORT</button><button class="w-full py-4 border border-white/20 font-black text-[11px]">GENERATE RESOLUTION</button></div>
                    </div>
                </div>
            </div>`;
        }

        // --- TAB 4: RESOLUTION ---
        function renderResolution() {
            const phase = resolutionPhases[state.resolutionPhase] || resolutionPhases[0];
            const scenario = scenarios[state.selectedScenario] || scenarios['ESCROW_DISPUTE'];
            return `
            <div class="space-y-12 animate-in fade-in duration-500">
                <header class="flex gap-8 items-center w-full border-b border-white/10 pb-12">
                    <div class="w-[70%] flex items-center gap-8">
                        <svg class="w-24 h-24 fill-[#FF0000]" viewBox="0 0 512 512"><path d="${RPR_PATH}"/></svg>
                        <div class="flex flex-col">
                            <h2 class="sovereign-heading tracking-tighter leading-none">
                                <span class="text-xl lg:text-2xl opacity-50 block font-bold mb-1 uppercase">INTELLIGENCE LAB</span>
                                <span class="text-6xl lg:text-7xl text-[#FF0000]">RESOLUTION</span>
                            </h2>
                        </div>
                    </div>
                </header>
                <div class="flex flex-col lg:flex-row gap-10 w-full items-stretch">
                    <div class="lg:w-[70%] flex flex-col gap-8">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            ${resolutionPhases.map((p, i) => `
                                <button onclick="state.resolutionPhase=${i}; render()" class="step-btn p-8 text-left glass ${state.resolutionPhase === i ? 'active' : 'opacity-40'}">
                                    <span class="block text-[11px] font-black uppercase mb-2">PHASE ${i + 1}</span>
                                    <span class="text-sm font-black uppercase">${p.label.split(': ')[1]}</span>
                                </button>
                            `).join('')}
                        </div>
                        <div class="glass p-12 shadow-glow-red flex-grow relative overflow-hidden">
                            <div class="relative z-10">
                                <span class="text-[12px] font-black font-mono opacity-40 mb-10 block">${phase.protocol}</span>
                                <h3 class="text-5xl font-black uppercase tracking-tighter mb-6">${phase.label}</h3>
                                <p class="text-xl text-white/60 leading-relaxed mb-12">${phase.description}</p>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    ${phase.actions.map(action => `<div class="bg-white/5 border border-white/10 p-5 flex items-center gap-4"><div class="w-5 h-5 bg-red-600 flex items-center justify-center text-[10px] font-black">✓</div><span class="text-[12px] font-bold uppercase">${action}</span></div>`).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="lg:w-[30%]">
                        <div class="glass p-10 shadow-glow-red flex flex-col h-full">
                            <h3 class="text-[11px] font-black opacity-50 uppercase text-center mb-10">Compliance Generator</h3>
                            <div class="space-y-5 flex-grow">${scenario.documents.map(doc => `<div class="p-6 bg-white/[0.03] border border-white/10 flex justify-between items-center"><span class="text-[11px] font-black uppercase">${doc}</span><i data-lucide="file-text" class="w-5 h-5 opacity-40"></i></div>`).join('')}</div>
                            <button onclick="state.isEscalated=true; render()" class="w-full py-6 bg-red-600 font-black uppercase text-[12px] tracking-widest shadow-glow-red mt-10">INITIALIZE FORMAL ESCALATION</button>
                        </div>
                    </div>
                </div>
            </div>`;
        }

        // --- HANDLERS ---
        function setTab(tab) { state.activeTab = tab; render(); }

        function handleRecallAction(val) {
            if (val === 'clear') {
                state.ledgerData = [];
            } else {
                state.currentWeek = val;
                state.ledgerData = [...MASTER_LEDGER];
            }
            render();
        }

        function lookup() {
            const val = document.getElementById('lookupInput').value.toUpperCase();
            state.searchUserId = val;
            state.selectedUser = val.includes('SMITH') ? dummyProfiles['SMITH'] : null;
            render();
        }

        document.addEventListener('DOMContentLoaded', () => render());
    </script>
</body>

</html>